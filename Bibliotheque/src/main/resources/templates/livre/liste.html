<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-primary"><i class="fas fa-book me-2"></i>Liste des livres</h2>
        <button class="btn btn-primary" onclick="window.location.href='/livres/nouveau'">
            <i class="fas fa-plus me-2"></i>Ajouter un livre
        </button>
    </div>
    <!-- Ajoutez cette partie juste après votre titre -->
<div class="row mb-4">
    <div class="col-md-8">
        <div class="input-group">
            <input type="text" 
                   id="bookSearch" 
                   class="form-control" 
                   placeholder="Rechercher par titre, auteur, tags..."
                   aria-label="Rechercher des livres">
            <button class="btn btn-primary" type="button" id="searchButton">
                <i class="fas fa-search"></i> Rechercher
            </button>
        </div>
    </div>
</div>

    
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th class="text-center">ID</th>
                    <th>Titre</th>
                    <th>Date de publication</th>
                    <th>Pages</th>
                    <th>Langue</th>
                    <th>Tags</th>
                    <th>Âge restriction</th>
                    <th>Auteur</th>
                    <th>Catégories</th>
                    <th class="text-center">Nb. exemplaires</th> <!-- Ajout colonne -->
                </tr>
            </thead>
            <tbody>
                <tr th:each="livre : ${livres}">
                    <td class="text-center" th:text="${livre.id}"></td>
                    <td th:text="${livre.titre}"></td>
                    <td th:text="${livre.datePublication}"></td>
                    <td class="text-center" th:text="${livre.nbPages}"></td>
                    <td th:text="${livre.langue}"></td>
                    <td th:text="${livre.tags}"></td>
                    <td class="text-center" th:text="${livre.ageRestriction != null ? livre.ageRestriction : 'Aucune'}"></td>
                    <td th:text="${livre.auteur.nom + ' ' + livre.auteur.prenom}"></td>
                    <td>
                        <div class="d-flex gap-1">
                            <span th:each="categorie : ${livre.categories}" 
                                  class="badge bg-primary rounded-pill me-1" 
                                  th:text="${categorie.nom}"></span>
                        </div>
                    </td>
                    <td class="text-center" th:text="${#lists.size(livre.exemplaires)}"></td> <!-- Affichage du nombre d'exemplaires -->
                </tr>
            </tbody>
        </table>
    </div>
</div>
<<<<<<< Updated upstream
=======

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('bookSearch');
        const searchButton = document.getElementById('searchButton');
        const bookCards = document.querySelectorAll('.col-md-12.mb-4');
        
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (searchTerm === '') {
                // Si le champ est vide, tout réafficher
                bookCards.forEach(card => {
                    card.style.display = '';
                });
                return;
            }
            
            let hasResults = false;
            
            bookCards.forEach(card => {
                // Récupère toutes les données textuelles de la carte
                const cardText = card.textContent.toLowerCase();
                
                if (cardText.includes(searchTerm)) {
                    card.style.display = '';
                    hasResults = true;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Afficher un message si aucun résultat
            const noResults = document.getElementById('noResults');
            if (!hasResults) {
                if (!noResults) {
                    const alert = document.createElement('div');
                    alert.id = 'noResults';
                    alert.className = 'alert alert-warning mt-3';
                    alert.textContent = 'Aucun livre ne correspond à votre recherche';
                    document.querySelector('.container').appendChild(alert);
                }
            } else if (noResults) {
                noResults.remove();
            }
        }
        
        // Recherche au clic sur le bouton
        searchButton.addEventListener('click', performSearch);
        
        // Recherche automatique quand le champ est vidé
        searchInput.addEventListener('input', function() {
            if (this.value.trim() === '') {
                performSearch();
            }
        });
        
        // Recherche avec la touche Entrée
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
    });
    </script>
>>>>>>> Stashed changes
